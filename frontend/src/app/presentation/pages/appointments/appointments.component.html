<app-page-toolbar [title]="'Gestión de Turnos'"></app-page-toolbar>

<div class="mt-4">
  <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-6 gap-4">
    <mat-card
      class="cursor-pointer background-scheduled"
      appearance="outlined"
      (click)="toggleScheduled()"
    >
      <mat-card-content>
        <div class="flex items-center justify-start gap-4">
          <div class="rounded-xl bg-[#38bdf8] flex p-2">
            <i-tabler class="text-white scale-130" name="calendar"></i-tabler>
          </div>
          <div class="flex-col flex">
            <span class="text-sm">Agendados</span>
            <span class="font-bold">12 pacientes</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card
      class="cursor-pointer background-waiting"
      appearance="outlined"
      (click)="toggleWaiting()"
    >
      <mat-card-content>
        <div class="flex items-center justify-start gap-4">
          <div class="rounded-xl bg-[#f9c20a] flex p-2">
            <i-tabler class="text-white scale-130" name="hourglass"></i-tabler>
          </div>
          <div class="flex-col flex">
            <span class="text-sm">En espera</span>
            <span class="font-bold">4 pacientes</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card
      class="cursor-pointer background-in-progress"
      appearance="outlined"
      (click)="toggleInProgress()"
    >
      <mat-card-content>
        <div class="flex items-center justify-start gap-4">
          <div class="rounded-xl bg-[#fb923c] flex p-2">
            <i-tabler
              class="text-white scale-130"
              name="stethoscope"
            ></i-tabler>
          </div>
          <div class="flex-col flex">
            <span class="text-sm">En consulta</span>
            <span class="font-bold">2 pacientes</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card
      class="cursor-pointer background-pending-payment"
      appearance="outlined"
      (click)="togglePendingPayment()"
    >
      <mat-card-content>
        <div class="flex items-center justify-start gap-4">
          <div class="rounded-xl bg-[#635bff] flex p-2">
            <i-tabler
              class="text-white scale-130"
              name="credit-card"
            ></i-tabler>
          </div>
          <div class="flex-col flex">
            <span class="text-sm">Pendientes de pago</span>
            <span class="font-bold">3 pacientes</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card
      class="cursor-pointer background-finalized"
      appearance="outlined"
      (click)="toggleFinalized()"
    >
      <mat-card-content>
        <div class="flex items-center justify-start gap-4">
          <div class="rounded-xl bg-[#10b981] flex p-2">
            <i-tabler
              class="text-white scale-130"
              name="circle-check"
            ></i-tabler>
          </div>
          <div class="flex-col flex">
            <span class="text-sm">Finalizados</span>
            <span class="font-bold">3 pacientes</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card
      class="cursor-pointer background-canceled"
      appearance="outlined"
      (click)="toggleCanceled()"
    >
      <mat-card-content>
        <div class="flex items-center justify-start gap-4">
          <div class="rounded-xl bg-[#f56565] flex p-2">
            <i-tabler class="text-white scale-130" name="circle-x"></i-tabler>
          </div>
          <div class="flex-col flex">
            <span class="text-sm">Cancelados</span>
            <span class="font-bold">2 pacientes</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <mat-card appearance="outlined" class="mt-4">
    <mat-card-content>
      <div class="flex w-full justify-between gap-4">
        <mat-form-field appearance="outline" class="w-[50%]">
          <mat-label>Buscar paciente</mat-label>
          <input type="text" matInput />
          <i-tabler matSuffix name="search" class="mx-4"></i-tabler>
        </mat-form-field>

        <button mat-flat-button matTooltipPosition="left" class="mt-1">
          <div class="flex items-center justify-center">
            <i-tabler class="mt-1 scale-80" name="plus"></i-tabler>
            <span class="mt-1">Nuevo turno</span>
          </div>
        </button>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-card appearance="outlined" class="mt-4">
    <mat-card-content>
      <div class="overflow-x-auto">
        <table mat-table [dataSource]="appointmentsDataSource" matSort>
          <ng-container matColumnDef="firstname">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Nombre</th>
            <td mat-cell *matCellDef="let element">{{ element.firstName }}</td>
          </ng-container>

          <ng-container matColumnDef="lastname">
            <th mat-header-cell *matHeaderCellDef>Apellido</th>
            <td mat-cell *matCellDef="let element">{{ element.lastName }}</td>
          </ng-container>

          <ng-container matColumnDef="date">
            <th mat-header-cell *matHeaderCellDef>Fecha</th>
            <td mat-cell *matCellDef="let element">
              <span>
                {{ element.appointmentDateTime | date : "dd/MM/yyyy" }}
                <strong>{{
                  element.appointmentDateTime | date : "HH:mm"
                }}</strong>
              </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="professional">
            <th mat-header-cell *matHeaderCellDef>Profesional</th>
            <td mat-cell *matCellDef="let element">
              {{ element.professional }}
            </td>
          </ng-container>

          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>Estado</th>
            <td mat-cell *matCellDef="let element">
              <span
                class="p-1.5 rounded-xl text-white"
                [ngClass]="{
                  'bg-[#38bdf8]': element.status === 'Agendado',
                  'bg-[#f9c20a]': element.status === 'En espera',
                  'bg-[#fb923c]': element.status === 'En consulta',
                  'bg-[#635bff]': element.status === 'Pendiente de pago',
                  'bg-[#10b981]': element.status === 'Finalizada',
                  'bg-[#f56565]': element.status === 'Cancelada'
                }"
              >
                {{ element.status }}
              </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="action">
            <th mat-header-cell *matHeaderCellDef>Acción</th>
            <td mat-cell *matCellDef="let element">
              <button
                mat-icon-button
                matTooltip="Editar"
                matTooltipPosition="above"
              >
                <i-tabler name="edit"></i-tabler>
              </button>
              <button
                mat-icon-button
                matTooltip="Ver"
                matTooltipPosition="above"
              >
                <i-tabler name="eye"></i-tabler>
              </button>
              <button
                mat-icon-button
                matTooltip="Cambiar estado"
                matTooltipPosition="above"
              >
                <i-tabler name="refresh"></i-tabler>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
        </table>
        <mat-paginator
          [pageSizeOptions]="[5, 10]"
          showFirstLastButtons="true"
          aria-label="Seleccionar página de usuarios"
        ></mat-paginator>
      </div>
    </mat-card-content>
  </mat-card>
</div>
